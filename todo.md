# todo

[-] add possibility to copy plan to clipboard
[-] add possibility to open certain vocation in ms word
[-] add possibility to sync data between own devices (need authorization)
[-] add possibility to share calendar with other users
[-] add periodic task for create next year calendar

приложение должно решать следующие задачи:

[+-] подготовка плана отпусков для отдела кадров (правильно высчитывать количество календарных дней)
[-] делиться своим планом и видеть планы отпусков коллег

конфликты при авторизации

- приложение позволяет без авторизации
  - создавать персональный план отпусков
  - делиться персональным планом отпусков
- возможные ситуации при авторизации пользователя
  - 1.
    - в бд нет персонального плана
    - в этом случае копируем данные из лс в бд
  - 2.
    - в бд есть персональный план
    - в локалсторэдж нет данных
    - в этом случае копируем данные из бд в лс
  - 3.
    - в бд есть персональный план
    - в лс есть другой персональный план
    - в план из лс НЕ расшарен ни с одним общим планом
    - в этом случае копируем данные из бд в лс
  - 4.
    - в бд есть персональный план
    - в лс есть другой персональный план
    - в план из лс расшарен ни с одним или несколькими общими планами
    - в этом случае копируем данные из бд в лс, при этом удаляем план к. был в лс из всех общих планов

При загрузке /

- если есть session, то:
  - находим:
    - personalRanges (userId)
    - personalSharedRanges (personal_ranges_id)
    - sharedRanges (owner_user_id)
  - проверяем
    если personal_ranges_id !== cookieStore.get('personalRangesId') то в useEffect cookieStore.set('personalRangesId', personalRanges.id)

- если нет session, но есть cookieStore.get('personalRangesId'), то:
  - находим
    - personalRanges (id)
    - personalSharedRanges (personal_ranges_id)
    - sharedRanges не ищем т.к. это доступно только авторизованным пользователям

- если нет session и нет cookieStore.get('personalRangesId'), то
  через useEffect
  - создаем personalRanges
  - устанавливаем куки cookieStore.set('personalRangesId', personalRanges.id)

планы отпусков:

- в локал сторадж (в каждом браузере свой)
- в бд (при авторизации синхронизируется между устройствами)
- общий в бд, содержит ссылки на персональные планы

- в целом план отпуска у человека д.б. один
- с другой стороны руководитель должен иметь возможность запретить вносить изменения в план

- куда попадает пользователь при заходе на otpuskplan.ru ? его нужно редиректить на общий план к которому он присоединился.

Общие планы отпусков:

[+-] создание редактирование удаление общих планов отпусков (только для авторизованных пользователей)
[-] возможность для админа зафиксировать график отпусков чтобы другие пользователи не могли его изменить
[-] просмотр списка общих планов с которыми пользователь поделился своим планом отпусков
[-] возможность отвязать свой план от общего плана отпусков

для отрисовки нужно получить:

- personalRanges
- sharedRanges
